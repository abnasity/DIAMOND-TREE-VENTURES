{% extends 'layouts/base.html' %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-3">
  <h3><i class="fas fa-bell me-2 text-primary"></i>Notifications</h3>
  <div>
    <div class="btn-group me-2" role="group">
      <a href="{{ url_for('customers.notifications', filter='all') }}"
         class="btn btn-sm {% if current_filter != 'unread' %}btn-primary{% else %}btn-outline-primary{% endif %}">
        All
      </a>
      <a href="{{ url_for('customers.notifications', filter='unread') }}"
         class="btn btn-sm {% if current_filter == 'unread' %}btn-primary{% else %}btn-outline-primary{% endif %}">
        Unread
      </a>
    </div>
    <a href="{{ url_for('customers.rejected_orders') }}" class="btn btn-outline-danger btn-sm">
      <i class="fas fa-times-circle me-1"></i> Rejected Orders
    </a>
  </div>
</div>



  {% if notifications %}
    <ul class="list-group shadow-sm">
      {% for note in notifications %}
        <li class="list-group-item d-flex justify-content-between align-items-start {% if not note.is_read %}fw-bold{% endif %}">
          <div class="ms-2 me-auto">
            <a href="{{ url_for('customers.mark_notification_read', notification_id=note.id) }}"
               class="text-decoration-none text-dark notification-link">
              {{ note.message }}
            </a>
            <div><small class="text-muted">{{ note.created_at.strftime('%Y-%m-%d %H:%M') }}</small></div>
          </div>
          {% if not note.is_read %}
            <span class="badge bg-primary rounded-pill">New</span>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <div class="alert alert-info mt-4" role="alert">
      <i class="fas fa-info-circle"></i> You have no notifications.
    </div>
  {% endif %}

  <div class="text-center mt-4">
    <a href="{{ url_for('customers.dashboard') }}" class="btn btn-primary">
      <i class="fas fa-arrow-left me-1"></i> Continue Shopping
    </a>
  </div>
</div>

{% endblock %}
